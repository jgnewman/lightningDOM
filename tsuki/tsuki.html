<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>test</title>
</head>
<body>
<script src="../lightning-dom.min.js"></script>
<script src="./tsuki.js"></script>
<script>

  const MyComponent = new Tsuki({

    onclick() {
      console.log('clicked and got', this.props, this.refs.myButton())
      this.props.updateProp1('A new value came through!')
    },

    view() {
      return T.div`class=component` (
        this.props.prop1,
        this.capture('myButton',
          T.button`
            class=my-button
            onclick=${this.onclick}
          ` ('Button text')
        ),
      )
    }

  })

  const App = new Tsuki({
    el: 'body',

    rules: {
      updateProp1: newVal => state => ({ ...state, prop1: newVal })
    },

    init() {
      return {
        prop1: 'I got passed through!'
      }
    },

    onclick(evt) {
      console.log(evt)
    },

    view() {
      return (
        T.ul`class=list-items onclick=${this.onclick}` (
          MyComponent.use`
            prop1=${this.props.prop1}
            updateProp1=${this.rules.updateProp1}
          `,
          T.li`class=list-item` ('Hello, how are you?'),
          T.li`class=list-item` ('Fine, how are you?'),
        )
      )
    }
  })

</script>
</body>
</html>
