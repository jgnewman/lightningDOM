!function(){var e="You can't use lightningDOM in a non-browser environment.",t="All nodes in an iteration must have a unique `key` attribute.",n={},r={},o={},i={},a={},s={},h={},u={};function d(){if("undefined"==typeof window)throw new Error(e);var d=window.document,l={onmount:[],onunmount:[]};function c(e){for(var t=l[e].length,n=0;n<t;n+=1)l[e][n]();l[e]=[]}function f(e,t,n,r){this.type=e,this.prev=t,this.next=n,this.data=r}function p(e,t,n,r,o){this.tag=e,this.text=r,this.attrs=t,this.children=n,this.parentNode=o,this.key=t.key,this.node=null}function v(e){var t=e.children.length;"function"==typeof e.attrs.onunmount&&l.onunmount.push(e.attrs.onunmount);for(var n=0;n<t;n+=1)v(e.children[n])}function m(e){"function"==typeof e.data[1]?e.prev.node[e.data[0]]=e.data[1]:e.prev.node.setAttribute(e.data[0],e.data[1]),g(e)}function g(e){e.next.node=e.prev.node}function y(e){for(var t,n,r,o,i,a,s,h,u=e.next.children,d=u.length-1,l=e.data.parentNode,c=e.data.matches,f=e.data.additions,p=Object.keys(f).length,v=d;v>=0;v-=1){var m=u[v];if(c.hasOwnProperty(m.key)){c[m.key];if(t=m,n=v===d,r=p,void 0,void 0,void 0,void 0,i=(o=e).prev.children,a=n&&i[i-1].key===t.key,s=o.data.matches[t.key],h=s[1]-s[0],a||!n&&h>0&&h!==r-function(e,t){for(var n=e.length,r=0,o=0;o<n&&e[o]<t;o+=1)r+=1;return r}(o.data.removalIndexes,s[0])){var g=u[v+1];l.insertBefore(m.node,g?g.node:null)}}else if(f.hasOwnProperty(m.key)){g=u[v+1];l.insertBefore(m.build(),g?g.node:null),p-=1}}}function k(e,t){t.innerHTML="",t.appendChild(e.build()),c("onmount")}p.prototype={build:function(e){var t,n=this.children.length;for(var r in t="text"===this.tag?d.createTextNode(this.text):"keylist"===this.tag?e:d.createElement(this.tag),this.attrs)"key"!==r&&("function"==typeof this.attrs[r]?t[r]=this.attrs[r]:t.setAttribute(r,this.attrs[r]));for(var o=0;o<n;o+=1){var i=this.children[o].build(t);i&&t.appendChild(i)}return this.node=t,"function"==typeof this.attrs.onmount&&l.onmount.push(t.onmount),"keylist"!==this.tag?t:null},compareAttrsTo:function(e){var t=[],n={};for(var r in this.attrs){var o=!1;for(var h in e.attrs)if(h===r){o=!0,n[r]=!0,e.attrs[h]!==this.attrs[r]&&t.push(new f(s,this,e,[h,e.attrs[h]]));break}o||t.push(new f(a,this,e,[r,this.attrs[r]]))}for(var h in e.attrs)n.hasOwnProperty(h)||t.push(new f(i,this,e,[h,e.attrs[h]]));return t},compareChildrenTo:function(e){var t,o,i,a=[],s=this.children,h=e.children,u=s.length,d=h.length;if(u<d){t=h.slice(0,u),remainder=h.slice(u),i=remainder.length;for(var l=0;l<u;l+=1)a=a.concat(s[l].compareTo(t[l]));for(l=0;l<i;l+=1)a.push(new f(n,null,remainder[l],s[0].node.parentNode))}else if(u>d){o=(t=s.slice(0,d)).length,remainder=s.slice(d),i=remainder.length;for(l=0;l<o;l+=1)a=a.concat(t[l].compareTo(h[l]));for(l=0;l<i;l+=1)a.push(new f(r,remainder[l]))}else for(l=0;l<u;l+=1)a=a.concat(s[l].compareTo(h[l]));return a},compareTo:function(e){var n=[];if(this.tag!==e.tag)n.push(new f(o,this,e));else if("text"===this.tag&&"text"===e.tag)this.text===e.text?n.push(new f(h,this,e)):n.push(new f(o,this,e));else if("keylist"===this.tag&&"keylist"===e.tag){var i=function(e,n){for(var o=[],i={},a={},s=[],h=-1,d=!0,l=e.children.length,c=n.children.length,p=0;p<l;p+=1){for(var v=!1,m=0;m<c;m+=1){var g=e.children[p],y=n.children[m];if("string"!=typeof g.key)throw new Error(t);if(y.key===g.key){a[g.key]=[p,m],v=!0,o=o.concat(g.compareTo(y)),m<h&&(d&&(d=!1),reorders[g]),d&&m<h&&(d=!1),h=m;break}}v||(o.push(new f(r,g)),s.push(p))}for(var p=0;p<c;p+=1){var y=n.children[p];if("string"!=typeof y.key)throw new Error(t);a.hasOwnProperty(y.key)||(i[y.key]=!0)}d&&!Object.keys(i).length||o.push(new f(u,e,n,{parentNode:e.parentNode.node,matches:a,additions:i,removalIndexes:s}));return o}(this,e);i.length&&(n=n.concat(i))}else{var a=this.compareAttrsTo(e);a.length&&(n=n.concat(a));var s=this.compareChildrenTo(e);s.length&&(n=n.concat(s)),!a.length&&n.push(new f(h,this,e))}return n}};var w=[],b=null,x=!1,T=null,N=null;function O(e,t){!w.length&&w.push(e),w[1]=t,b||(b=setTimeout(function(){b=null,x?function(e,t){for(var d,l,f,p,k,w=e.compareTo(t),b=w.length,x=0;x<b;x+=1)switch((d=w[x]).type){case n:(k=d).data.appendChild(k.next.build());break;case r:(p=d).prev.node.parentNode.removeChild(p.prev.node),v(p.prev);break;case o:(f=d).prev.node.parentNode.replaceChild(f.next.build(),f.prev.node),v(f.prev);break;case i:m(d);break;case a:"function"==typeof(l=d).data[1]?l.prev.node[l.data[0]]=void 0:l.prev.node.removeAttribute(l.data),g(l);break;case s:m(d);break;case u:y(d);break;case h:g(d)}c("onunmount"),c("onmount")}(w[0],w[1]):(clearTimeout(T),k(w[1],N)),w=[w[1]]},0))}return{create:function(e,t,n){for(var r=new p(e,t=t||{},n=n||[]),o=n.length,i=0;i<o;i+=1){var a=n[i];a instanceof Array?n[i]=new p("keylist",{},a,null,r):a instanceof p||(n[i]=new p("text",{},[],String(a)))}return r},render:function(e,t){N=t,T=setTimeout(function(){w.length<2&&(x=!0,k(e,t))},0)},migrate:function(e,t){return O(e,t),t}}}"undefined"!=typeof module?module.exports=d:window.lightningDOM=d}();
